import { Document } from "../../document";
import { PdfIndirectObject, RawData } from "../objects";
import { Trailer } from "./trailer";

export enum XRefType {
  XRefTable,
  XRefStream,
}

export interface XRef extends RawData {
  /**
   * Предыдущий XRef.
   */
  prev?: XRef;
  /**
   * Набор IndirectObject данного XRef.
   */
  objects: Map<number, PdfIndirectObject>;
  /**
   * Документ в котором находится данный XRef.
   */
  doc: Document;
  /**
   * Поле Size указывает на следующий номер IndirectObject для присвоения.
   */
  Size: number;
  trailer: Trailer;

  push(...object: PdfIndirectObject[]): void;

  // delete(id: number) // ? мы удалять объекты не будем

  /**
   * Ищет объект среди своих и среди объектов в предыдущих историях.
   * @param id
   */
  findIndirectObject(id: number): PdfIndirectObject | null;

  /**
   * Ищет и возвращает объект.
   * @param id
   */
  getIndirectObject(id: number): PdfIndirectObject;
}
