import * as assert from "node:assert";
import { CIDFontWidthsConverter } from "./font";

describe("Font", () => {
  context("CIDFontWidthsConverter", () => {
    context("flatten()", () => {
      it("should flatten widths", () => {
        const flattenWidths = CIDFontWidthsConverter.flatten([
          0, [1, 2],
          2, 3, 5,
          4, [6, 7, 8],
        ]);
        assert.deepEqual(flattenWidths, [1, 2, 5, 5, 6, 7, 8]);
      });
    });
    context("expand()", () => {
      it("should expand widths", () => {
        const expandWidths = CIDFontWidthsConverter.expand([
          1, 2,
          5, 5,
          6, 7, 8,
          0, 0,
          1, // элемент с одним значением
          0, 0]);
        assert.deepEqual(expandWidths, [
          0, [1, 2],
          2, 3, 5,
          4, [6, 7, 8],
          7, 8, 0,
          9, [1],
          10, 11, 0,
        ]);
      });
    });
  });
});
