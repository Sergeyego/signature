import { IPdfObjectParams, PdfObject } from "./object";

export interface IPdfNumberParams extends IPdfObjectParams {
  value?: number;
}

export class PdfNumber extends PdfObject {
  #value: number;

  public constructor(param: IPdfNumberParams = {}) {
    super(param);
    this.#value = param.value ?? 0;
  }

  public get value(): number {
    return this.#value;
  }

  public set value(v: number) {
    if (v !== this.#value) {
      this.change();
      this.#value = v;
    }
  }

  protected override onConvert(obj: PdfObject): void {
    if (!(obj instanceof PdfNumber)) {
      throw new Error(`Ошибка преобразования PdfNumber в '${obj.constructor.name}'.`);
    }

    obj.value = this.value;
  }

  protected override onSetValue(v: PdfNumber): void {
    this.#value = v.#value;
  }

  public reWriteValue(v: number): void {
    this.reWriteRaw(this.doc.createNumber(v));
  }
}
